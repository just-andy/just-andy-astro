---
import { getCollection, render } from "astro:content";
import FrontmatterLayout from "../../layouts/FrontmatterLayout.astro";
import Hero from "../../components/Hero.astro";
import { Breadcrumbs, BreadcrumbsItem } from "accessible-astro-components";

export async function getStaticPaths() {
  const articles = await getCollection("articles");
  return articles.map((article) => ({
    params: { slug: article.id },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);
---

<FrontmatterLayout
  frontmatter={article.data}
  title={article.data.title}
  description={article.data.summary}
>
  <Hero
    url={article.data.banner}
    tags={article.data.keywords}
    summary={article.data.summary}
    title={article.data.title}
  />

  <Breadcrumbs>
    <BreadcrumbsItem href="/" label="Home" />
    <BreadcrumbsItem href="/articles" label="Articles" />
    <BreadcrumbsItem currentPage={true} label={article.data.title} />
  </Breadcrumbs>
  <main class="prose | flow" id="main-content" role="main">
    <Content />
  </main>
</FrontmatterLayout>
