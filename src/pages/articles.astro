---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
const allarticles = await getCollection("articles");

const dateOptions: object = {
  year: "numeric",
  month: "long",
  day: "numeric",
};
---

<Layout title="Articles" description="All my articles">
  <main id="main-content" class="container" role="main">
    <div class="grid__one-column" role="list">
      {
        allarticles.map((article) => (
          <article class="article-card">
            <header>
              <div class="article-card__time">
                <time datetime={article.data.publishDate.toISOString()}>
                  {article.data.publishDate.toLocaleDateString(
                    "en-GB",
                    dateOptions
                  )}
                </time>
              </div>
              <h2 class="article-card__title">
                <a href={`/articles/${article.id}`} title={article.data.title}>
                  {article.data.title}
                </a>
              </h2>
            </header>

            <p>{article.data.description}</p>
            <footer class="article-card__footer">
              <div class="tags">{article.data.keywords.join(", ")}</div>
            </footer>
          </article>
        ))
      }
    </div>
  </main>
</Layout>
